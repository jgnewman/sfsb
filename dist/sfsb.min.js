!function e(t,s,r){function n(a,i){if(!s[a]){if(!t[a]){var c="function"==typeof require&&require;if(!i&&c)return c(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var u=s[a]={exports:{}};t[a][0].call(u.exports,function(e){var s=t[a][1][e];return n(s?s:e)},u,u.exports,e,t,s,r)}return s[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)n(r[a]);return n}({1:[function(e,t){var s=t.exports={};s.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var s=[];return window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),s.length>0)){var r=s.shift();r()}},!0),function(e){s.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),s.title="browser",s.browser=!0,s.env={},s.argv=[],s.binding=function(){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(){throw new Error("process.chdir is not supported")}},{}],2:[function(e){(function(t){function s(e){var t="";return"string"==typeof e?e:(Object.keys(e).forEach(function(s){var r=e[s];"object"==typeof r?Array.isArray(r)?r.forEach(function(e){t+="&"+s+"[]="+encodeURIComponent(e)}):Object.keys(r).forEach(function(e){t+="&"+s+"{"+e+"}="+encodeURIComponent(r[e])}):t+="&"+s+"="+encodeURIComponent(r)}),t.slice(1))}function r(e){var n,o,a,i,c,u,f=new XMLHttpRequest,d=e.type?e.type.toUpperCase():"GET";Object.prototype.hasOwnProperty.call(e,"data")&&(c=s(e.data)),"GET"===d&&(c="?"+c),i=e.url+("GET"===d?c||"":""),f.open(d,i,!0),f.setRequestHeader("Content-type","application/x-www-form-urlencoded"),Object.prototype.hasOwnProperty(e,"headers")&&Object.keys(e.headers).forEach(function(t){f.setRequestHeader(t,e.headers[t])}),n=+new Date,f.send("POST"===d||"DELETE"===d||"PUT"===d?c||null:null),u=setTimeout(function(){f.abort(),self.postMessage(resData={success:!1,response:"timeout",status:xhr.status,prevFreq:prevFreq||0,duration:+new Date-n,sent:e.data,utf8Bytes:0}),o(resData)},1e4),f.addEventListener("load",function(s){var r=parseInt(s.srcElement.status);clearTimeout(u),self.postMessage(200>r||r>299?resData={success:!1,response:s.srcElement.responseText,status:s.srcElement.status,prevFreq:prevFreq||0,duration:+new Date-n,sent:e.data,utf8Bytes:byteSize(s.srcElement.responseText)}:resData={success:!0,response:t?t(s.srcElement.responseText):s.srcElement.responseText,status:s.srcElement.status,prevFreq:prevFreq||0,duration:+new Date-n,sent:e.data,utf8Bytes:byteSize(s.srcElement.responseText)}),o(resData)}),f.addEventListener("error",function(t){clearTimeout(u),self.postMessage(resData={success:!1,response:t.srcElement.responseText,status:t.srcElement.status,prevFreq:prevFreq||0,duration:+new Date-n,sent:e.data,utf8Bytes:byteSize(t.srcElement.responseText)}),o(resData)}),o=function(t){var s,n,o;"GET"===d&&(haveRefresh&&(reqCount+=1),t&&backoff&&(a=prevFreq=t.success?frequency:backoff(t)),s=function(){unsubscribe(o),haveRefresh&&reqCount>=refresh?self.postMessage({refresh:!0,params:e.data}):r(globals)},n=setTimeout(s,a||frequency),o=function(){clearTimeout(n),unsubscribe(o),s()},subscribe(o))},!backoff&&o()}function n(e,t){var s=f(),r=i.replace("{{SOCKETURL}}",'"'+e+'"').replace("{{CALLBACK}}",t?t.toString():"null");s.postJob(r,!0),this.worker=s}function o(e){return c.replace("{{GLOBALS}}",JSON.stringify(e)).replace("{{PROCESS}}",e.process?e.process.toString():"null").replace("{{BACKOFF}}",e.backoff?e.backoff.toString():"null").replace("{{FREQNCY}}",e.frequency||3e4).replace("{{REFRESH}}",e.refresh?e.refresh:null).replace("{{HAVEREF}}",String("number"==typeof e.refresh))}function a(e){var t,s,r,n;e.type="GET",t=f(),s=o(e),t.postJob(s,!0),r=function(e){var t;e.data.refresh===!0?this.refresh(e.data.params):(t=e.data.success?"success":"error",this["on"+t].forEach(function(t){t(e.data)}),this.onmessage.forEach(function(t){t(e.data)}))}.bind(this),n=function(e){var t={success:!1,response:e,status:-1};this.onerror.forEach(function(e){e(t)}),this.onmessage.forEach(function(e){e(t)})}.bind(this),this.refresh=function(t){e.data=t,this.task=o(e),this.worker.end(),this.worker=f(),this.worker.postJob(this.task,!0),this.worker.addListener("message",r),this.worker.addListener("error",n)},t.addListener("message",r),t.addListener("error",n),this.worker=t,this.task=s,this.settings=e,this.onsuccess=[],this.onerror=[],this.onmessage=[]}var i,c,u=window,f=e("./secretary");c="function () {  var globals     = {{GLOBALS}},      process     = {{PROCESS}},      backoff     = {{BACKOFF}},      frequency   = {{FREQNCY}},      refresh     = {{REFRESH}},      haveRefresh = {{HAVEREF}},      reqCount    = 0,      subs        = [],      prevFreq;  function byteSize(s) {    return encodeURI(s).split(/%..|./).length - 1;  } function subscribe(fn) { subs.push(fn) } function unsubscribe(fn) { subs.splice(subs.indexOf(fn), 1) } function update() { subs.forEach(function (each) { each() }) }"+s.toString()+r.toString()+'  createXHR(globals);  return function (msg) {    if (msg.type === "UPDATE") {      globals.data = msg.params;      update();      return;    }    msg.url = globals.url;    !msg.timeout && (msg.timeout = globals.timeout);    !msg.headers && (msg.headers = globals.headers);    createXHR(msg);  };}',i="function () {  var socket   = new WebSocket({{SOCKETURL}}),      origSend = WebSocket.prototype.send,      callback = {{CALLBACK}};  WebSocket.prototype.send = function (msg) {    if (this.readyState !== 1) {      return setTimeout(function () {this.send(msg)}.bind(this), 10);    }    return origSend.call(this, msg);  };  socket.onmessage = function (msg) {    self.postMessage(callback ? callback(msg.data) : msg.data);  };  return function (msg) {    socket.send(msg);  };}",n.prototype={send:function(e){return this.worker.postMessage(e),this},close:function(){return this.worker.end(),this},addEventListener:function(e,t){return this.worker.addListener(e,t),this}},a.prototype={close:function(){return this.worker.close(),this},post:function(e){return e.type="POST",this.worker.postMessage(e),this},put:function(e){return e.type="PUT",this.worker.postMessage(e),this},del:function(e){return e.type="DELETE",this.worker.postMessage(e),this},update:function(e){return this.worker.postMessage({type:"UPDATE",params:e}),this},addEventListener:function(e,t){return this["on"+e.toLowerCase()].push(t),this}},u.SF={socketBooster:n,ajaxPoller:a}}).call(this,e("/Users/john/Sites/github/sfsb/node_modules/gulp-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"./secretary":3,"/Users/john/Sites/github/sfsb/node_modules/gulp-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":1}],3:[function(e,t){function s(){var e,t,s=this;t=function(e,t){var s=new Function("return "+t+";");return s.call(e)},this.onmessage=function(r){var n;switch(r.data.label){case"job":return n=new Function(r.data.msg.params[0],r.data.msg.body),e=r.data.msg.immediate?n():n;case"cmd":return t(s,r.data.msg.body);case"message":return e(r.data.msg);case"close":return self.close()}}}function r(e,t){var s;return e="function"==typeof e?e.toString():e,s=e.replace(/^function\s*[^\(]*\s*\(/,""),{body:s.replace(/^[^\)]*\)\s*\{|\}$/g,""),immediate:!!t,params:s.replace(/\s+/g,"").replace(/\).*$/,"").split(",")}}function n(){var e=new Worker(window.URL.createObjectURL(o)),t=[],s=[],n=[];return e.onmessage=function(e){t.forEach(function(t){t(e)})},e.onerror=function(e){s.forEach(function(t){t(e)})},e.onclose=function(e){n.forEach(function(t){t(e)})},{addListener:function(e,r){switch(e){case"message":t.push(r);break;case"error":s.push(r)}return this},postJob:function(t,s){return e.postMessage({label:"job",msg:r(t,s)}),this},postCmd:function(t){return e.postMessage({label:"cmd",msg:r(t)}),this},postMessage:function(t){return e.postMessage({label:"message",msg:t}),this},end:function(t){var s=!1;this.addListener("close",function(){s=!0}),setTimeout(function(){!s&&e.terminate()},100),this.postCmd(function(){self.close()})}}}var o;o=new Blob([r(s).body],{type:"text/javascript"}),t.exports=n},{}]},{},[2]);