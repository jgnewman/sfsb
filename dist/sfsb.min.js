!function e(t,n,r){function s(a,i){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!i&&c)return c(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return s(n?n:e)},u,u.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)s(r[a]);return s}({1:[function(e){function t(e,t){var r=s(),o=n.replace("{{SOCKETURL}}",'"'+e+'"').replace("{{CALLBACK}}",t?t.toString():"null");r.postJob(o),this.worker=r}var n,r=window,s=e("./secretary");n="(function () {  var socket   = new WebSocket({{SOCKETURL}}),      origSend = WebSocket.prototype.send,      callback = {{CALLBACK}};  WebSocket.prototype.send = function (msg) {    if (this.readyState !== 1) {      return setTimeout(function () {this.send(msg)}.bind(this), 10);    }    return origSend.call(this, msg);  };  socket.onmessage = function (msg) {    self.postMessage(callback ? callback(msg.data) : msg.data);  };  return function (msg) {    socket.send(msg);  };}())",t.prototype={send:function(e){return this.worker.postMessage(e)},close:function(){return this.worker.close()},addEventListener:function(e,t){return this.worker.addListener(e,t)}},r.SFSB=t},{"./secretary":2}],2:[function(e,t){function n(){var e,t,n=this;t=function(e,t){var n=new Function("return "+t+";");return n.call(e)},this.onmessage=function(r){var s;switch(r.data.label){case"job":return s=new Function(r.data.msg.params[0],r.data.msg.body),e=r.data.msg.immediate?s():s;case"cmd":return t(n,r.data.msg.body);case"message":return e(r.data.msg);case"close":return self.close()}}}function r(e){var t;return e="function"==typeof e?e.toString():e,t=e.replace(/^\(?function\s*[^\(]*\s*\(/,""),{body:t.replace(/^[^\)]*\)\s*\{|\}(\(\)\))?$/g,""),immediate:/\}(\(\)\))?$/.test(e),params:t.replace(/\s+/g,"").replace(/\).*$/,"").split(",")}}function s(){var e=new Worker(window.URL.createObjectURL(o)),t=[],n=[],s=[];return e.onmessage=function(e){t.forEach(function(t){t(e)})},e.onerror=function(e){n.forEach(function(t){t(e)})},e.onclose=function(e){s.forEach(function(t){t(e)})},{addListener:function(e,r){switch(e){case"message":t.push(r);break;case"error":n.push(r)}return this},postJob:function(t){return e.postMessage({label:"job",msg:r(t)}),this},postCmd:function(t){return e.postMessage({label:"cmd",msg:r(t)}),this},postMessage:function(t){return e.postMessage({label:"message",msg:t}),this},end:function(t){var n=!1;this.addListener("close",function(){n=!0}),setTimeout(function(){!n&&e.terminate()},100),this.postCmd(function(){self.close()})}}}var o;o=new Blob([r(n).body],{type:"text/javascript"}),t.exports=s},{}]},{},[1]);