!function e(t,s,r){function n(i,a){if(!s[i]){if(!t[i]){var u="function"==typeof require&&require;if(!a&&u)return u(i,!0);if(o)return o(i,!0);throw new Error("Cannot find module '"+i+"'")}var c=s[i]={exports:{}};t[i][0].call(c.exports,function(e){var s=t[i][1][e];return n(s?s:e)},c,c.exports,e,t,s,r)}return s[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)n(r[i]);return n}({1:[function(e,t){var s=t.exports={};s.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var s=[];return window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),s.length>0)){var r=s.shift();r()}},!0),function(e){s.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),s.title="browser",s.browser=!0,s.env={},s.argv=[],s.binding=function(){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(){throw new Error("process.chdir is not supported")}},{}],2:[function(e){(function(t){function s(e){var t="";return"string"==typeof e?e:(Object.keys(e).forEach(function(s){var r=e[s];"object"==typeof r?Array.isArray(r)?r.forEach(function(e){t+="&"+s+"[]="+encodeURIComponent(e)}):Object.keys(r).forEach(function(e){t+="&"+s+"{"+e+"}="+encodeURIComponent(r[e])}):t+="&"+s+"="+encodeURIComponent(r)}),t.slice(1))}function r(e){var n,o,i,a=new XMLHttpRequest,u=e.type?e.type.toUpperCase():"GET";return Object.prototype.hasOwnProperty.call(e,"data")&&(o=s(e.data)),"GET"===u&&(o="?"+o),n=e.url+("GET"===u?o||"":""),a.open(u,n,!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),Object.prototype.hasOwnProperty(e,"headers")&&Object.keys(e.headers).forEach(function(t){a.setRequestHeader(t,e.headers[t])}),a.send("POST"===u||"DELETE"===u||"PUT"===u?o||null:null),i=setTimeout(function(){a.abort(),self.postMessage({result:"error",response:"timeout",status:xhr.status})},1e4),a.addEventListener("load",function(e){var s=parseInt(e.srcElement.status);clearTimeout(i),self.postMessage(200>s||s>299?{result:"error",response:e.srcElement.response,status:e.srcElement.status}:{result:"success",response:t?t(e.srcElement.response):e.srcElement.response,status:e.srcElement.status})}),a.addEventListener("error",function(e){clearTimeout(i),self.postMessage({result:"error",response:e.srcElement.response,status:e.srcElement.status})}),"GET"===u&&setTimeout(function(){r(e)},e.frequency||3e4)}function n(e,t){var s=c(),r=i.replace("{{SOCKETURL}}",'"'+e+'"').replace("{{CALLBACK}}",t?t.toString():"null");s.postJob(r,!0),this.worker=s}function o(e){var t,s;e.type="GET",t=c(),s=a.replace("{{GLOBALS}}",JSON.stringify(e)).replace("{{PROCESS}}",e.process?e.process.toString():"null"),t.postJob(s,!0),t.addListener("message",function(e){this["on"+e.data.result].forEach(function(t){t(e.data)}),this.onmessage.forEach(function(t){t(e.data)})}.bind(this)),t.addListener("error",function(e){var t={result:"error",response:e,status:-1};this.onerror.forEach(function(e){e(t)}),this.onmessage.forEach(function(e){e(t)})}),this.worker=t,this.settings=e,this.onsuccess=[],this.onerror=[],this.onmessage=[]}var i,a,u=window,c=e("./secretary");a="function () {  var globals = {{GLOBALS}},      process = {{PROCESS}};"+s.toString()+r.toString()+"  createXHR(globals);  return function (msg) {    msg.url = globals.url;    !msg.timeout && (msg.timeout = globals.timeout);    !msg.headers && (msg.headers = globals.headers);    createXHR(msg);  };}",i="function () {  var socket   = new WebSocket({{SOCKETURL}}),      origSend = WebSocket.prototype.send,      callback = {{CALLBACK}};  WebSocket.prototype.send = function (msg) {    if (this.readyState !== 1) {      return setTimeout(function () {this.send(msg)}.bind(this), 10);    }    return origSend.call(this, msg);  };  socket.onmessage = function (msg) {    self.postMessage(callback ? callback(msg.data) : msg.data);  };  return function (msg) {    socket.send(msg);  };}",n.prototype={send:function(e){return this.worker.postMessage(e),this},close:function(){return this.worker.close(),this},addEventListener:function(e,t){return this.worker.addListener(e,t),this}},o.prototype={close:function(){return this.worker.close(),this},post:function(){return msg.type="POST",this.worker.postMessage(msg),this},put:function(){return msg.type="PUT",this.worker.postMessage(msg),this},del:function(){return msg.type="DELETE",this.worker.postMessage(msg),this},addEventListener:function(e,t){return this["on"+e.toLowerCase()].push(t),this}},u.SF={socketBooster:n,ajaxPoller:o}}).call(this,e("/Users/john/Sites/github/sfsb/node_modules/gulp-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js"))},{"./secretary":3,"/Users/john/Sites/github/sfsb/node_modules/gulp-browserify/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js":1}],3:[function(e,t){function s(){var e,t,s=this;t=function(e,t){var s=new Function("return "+t+";");return s.call(e)},this.onmessage=function(r){var n;switch(r.data.label){case"job":return n=new Function(r.data.msg.params[0],r.data.msg.body),e=r.data.msg.immediate?n():n;case"cmd":return t(s,r.data.msg.body);case"message":return e(r.data.msg);case"close":return self.close()}}}function r(e,t){var s;return e="function"==typeof e?e.toString():e,s=e.replace(/^function\s*[^\(]*\s*\(/,""),{body:s.replace(/^[^\)]*\)\s*\{|\}$/g,""),immediate:!!t,params:s.replace(/\s+/g,"").replace(/\).*$/,"").split(",")}}function n(){var e=new Worker(window.URL.createObjectURL(o)),t=[],s=[],n=[];return e.onmessage=function(e){t.forEach(function(t){t(e)})},e.onerror=function(e){s.forEach(function(t){t(e)})},e.onclose=function(e){n.forEach(function(t){t(e)})},{addListener:function(e,r){switch(e){case"message":t.push(r);break;case"error":s.push(r)}return this},postJob:function(t,s){return e.postMessage({label:"job",msg:r(t,s)}),this},postCmd:function(t){return e.postMessage({label:"cmd",msg:r(t)}),this},postMessage:function(t){return e.postMessage({label:"message",msg:t}),this},end:function(t){var s=!1;this.addListener("close",function(){s=!0}),setTimeout(function(){!s&&e.terminate()},100),this.postCmd(function(){self.close()})}}}var o;o=new Blob([r(s).body],{type:"text/javascript"}),t.exports=n},{}]},{},[2]);